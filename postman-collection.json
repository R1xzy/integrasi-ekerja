{
  "info": {
    "name": "E-Kerja Backend API Testing - Complete with Encryption REQ-B-2.4/8.2",
    "description": "Koleksi testing lengkap untuk semua requirement backend API E-Kerja plus ENKRIPSI:\n- REQ-B-1 to REQ-B-15: Core platform functionality\n- NEW ENCRYPTION FEATURES:\n  • REQ-B-2.4: File Upload dengan Enkripsi Nama File (AES-256-CBC)\n  • REQ-B-8.2: End-to-End Chat Message Encryption dalam Database\n\n🔒 FITUR ENKRIPSI:\n✅ AES-256-CBC encryption untuk nama file dengan unique IV\n✅ Database storage metadata enkripsi (FileEncryption model)\n✅ Enkripsi pesan chat sebelum disimpan ke database\n✅ Auto-dekripsi pesan saat diambil untuk display\n✅ Security testing utilities untuk validasi keamanan\n✅ Performance testing (target < 5ms per operasi)\n✅ Raw database view untuk security audit\n\n🧪 TESTING FLOW ENKRIPSI:\n1. Test Basic Encryption (REQ-B-2.4 & 8.2)\n2. Test Database Integration (encrypt on save, decrypt on retrieve)\n3. Test Production Chat API dengan enkripsi otomatis\n4. Test File Info API dengan nama terenkripsi\n5. Security Validation (raw database tidak readable)\n\n⚙️ SETUP REQUIREMENTS:\n- Environment variables: ENCRYPTION_KEY, CHAT_ENCRYPTION_KEY\n- Database migration untuk FileEncryption model\n- Bearer token authentication\n- Postman environment dengan encryption test data\n\n📋 LEGACY FEATURES:\n✅ Complete Authentication & User Management\n✅ Service & Portfolio dengan File Upload\n✅ Order Management & Payment Processing\n✅ Review System dengan Edit capability\n✅ Admin Chat Access dengan Customer Approval\n✅ Email Verification System (Registration, Password Reset, Order Status)\n✅ Advanced Data Table dengan Sorting/Filtering\n✅ Provider Attendance & Customer Verification\n✅ Statistics & Analytics APIs\n\n🔒 ENCRYPTION TESTING SUITE:\n✅ REQ-B-2.4: File Upload Encryption with Database Verification\n✅ REQ-B-8.2: Chat Message Encryption with Auto-Decrypt\n✅ Security penetration testing to verify no sensitive data exposure\n✅ Comprehensive database verification endpoints\n✅ Automated test scripts for encryption validation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "[REQ-B-1] API Pengguna dan Autentikasi",
      "item": [
        {
          "name": "[REQ-B-1.1] Register Customer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Budi Santoso\",\n  \"email\": \"customer.test@example.com\",\n  \"password\": \"Customer123!\",\n  \"phoneNumber\": \"081234567890\",\n  \"roleId\": 1,\n  \"verificationCode\": \"{{registration_verification_code}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Test pendaftaran user customer baru dengan email verification.\nPREREQUISITE: Jalankan 'Send Registration Verification Email' terlebih dahulu untuk mendapatkan verificationCode.\nMemerlukan verificationCode dari email yang akan auto-extract ke environment variable."
          }
        },
        {
          "name": "[REQ-B-1.1] Register Provider",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Siti Nurhaliza Provider\",\n  \"email\": \"provider.test@example.com\",\n  \"password\": \"Provider123!\",\n  \"phoneNumber\": \"081234567891\",\n  \"roleId\": 2,\n  \"verificationCode\": \"{{registration_verification_code}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Test pendaftaran provider baru dengan email verification.\nPREREQUIISITE: Jalankan 'Send Registration Verification Email' terlebih dahulu untuk mendapatkan verificationCode.\nMemerlukan verificationCode dari email, status verifikasi provider otomatis PENDING."
          }
        },
        {
          "name": "[REQ-B-1.1] Register Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Admin Test\",\n  \"email\": \"admin.test@example.com\",\n  \"password\": \"Admin123!\",\n  \"phoneNumber\": \"081234567892\",\n  \"roleId\": 3,\n  \"verificationCode\": \"{{registration_verification_code}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Test pendaftaran admin baru dengan email verification.\nPREREQUISITE: Jalankan 'Send Registration Verification Email' terlebih dahulu untuk mendapatkan verificationCode.\nMemerlukan verificationCode dari email yang akan auto-extract ke environment variable."
          }
        },
        {
          "name": "[REQ-B-1.1] Register - Duplicate Email Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Duplicate User\",\n  \"email\": \"customer.test@example.com\",\n  \"password\": \"Test123!\",\n  \"phoneNumber\": \"081234567893\",\n  \"roleId\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Test validasi keunikan email - should return 409 error"
          }
        },
        {
          "name": "[REQ-B-1.2] Login Customer - Get Bearer Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Auto-extract Bearer token untuk requests selanjutnya",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.environment.set('customer_token', response.data.token);",
                  "        pm.environment.set('customer_id', response.data.user.id);",
                  "        console.log('Customer Bearer token saved:', response.data.token.substring(0, 20) + '...');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@example.com\",\n  \"password\": \"customer123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "✅ Login customer dengan seeded credentials dan auto-save Bearer token"
          }
        },
        {
          "name": "[REQ-B-1.2] Login Provider - Get Bearer Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Auto-extract Bearer token untuk requests selanjutnya",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.environment.set('provider_token', response.data.token);",
                  "        pm.environment.set('provider_id', response.data.user.id);",
                  "        console.log('Provider Bearer token saved:', response.data.token.substring(0, 20) + '...');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"fanza.atsilatif423@example.com\",\n  \"password\": \"Atsla123!!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "✅ Login provider Fanza dan auto-save Bearer token"
          }
        },
        {
          "name": "[REQ-B-1.2] Login Admin - Get Bearer Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Auto-extract Bearer token untuk requests selanjutnya",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.environment.set('admin_token', response.data.token);",
                  "        pm.environment.set('admin_id', response.data.user.id);",
                  "        console.log('Admin Bearer token saved:', response.data.token.substring(0, 20) + '...');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@ekerjakarawang.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "✅ Login admin dengan seeded credentials dan auto-save Bearer token"
          }
        },
        {
          "name": "[REQ-B-1.2] Login Other Provider - For Testing",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Auto-extract Bearer token untuk provider lain",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.environment.set('other_provider_token', response.data.token);",
                  "        console.log('Other Provider Bearer token saved:', response.data.token.substring(0, 20) + '...');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"budi.teknisi@example.com\",\n  \"password\": \"Budi123!!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "✅ Login provider Budi untuk testing review reports"
          }
        },
        {
          "name": "[REQ-B-1.2] Login - Invalid Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@example.com\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "Test login dengan password salah - should return 401"
          }
        },
        {
          "name": "[REQ-B-1.3] Reset Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer.test@example.com\",\n  \"newPassword\": \"NewPassword123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/reset-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "reset-password"
              ]
            },
            "description": "Test reset password dengan validasi complexity [C-15]"
          }
        },
        {
          "name": "[REQ-B-1.4] Get User Profile - Bearer Token Protected",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "description": "Bearer token dari login customer"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/auth/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            },
            "description": "✅ Test Bearer token authentication pada protected endpoint"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-2] API Manajemen Profil dan Verifikasi",
      "item": [
        {
          "name": "[REQ-B-2.1] Update Provider Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Siti Nurhaliza Provider Updated\",\n  \"phoneNumber\": \"081234567899\",\n  \"address\": \"Jl. Provider Baru No. 123, Karawang\",\n  \"providerBio\": \"Teknisi AC berpengalaman 15 tahun dengan sertifikat BNSP. Melayani wilayah Karawang dan sekitarnya.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/profile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "profile"
              ]
            },
            "description": "Test update profil provider"
          }
        },
        {
          "name": "[REQ-B-2.2] Upload Image File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/test-image.jpg"
                },
                {
                  "key": "type",
                  "value": "image",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "upload"
              ]
            },
            "description": "Test upload image dengan secure filename generation [C-18]"
          }
        },
        {
          "name": "[REQ-B-2.2] Upload Document File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/test-document.pdf"
                },
                {
                  "key": "type",
                  "value": "document",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "upload"
              ]
            },
            "description": "Test upload dokumen PDF"
          }
        },
        {
          "name": "[REQ-B-2.4] Test File Upload with Encrypted Filename",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/your/test-image.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "upload"
              ]
            },
            "description": "REQ-B-2.4: Test upload dengan enkripsi nama file - File disimpan dengan nama terenkripsi dan unik. (Note: C-7 constraint applies to chat encryption, not file uploads)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "console.log('\\n🔒 [REQ-B-2.4] File Upload Encryption Test - Enhanced Validation');",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    console.log('✅ File uploaded successfully');",
                  "    console.log('📁 Original filename: test-image.jpg');",
                  "    console.log('🔐 Encrypted filename:', response.data.fileName);",
                  "    ",
                  "    // Save document ID for database verification",
                  "    if (response.data.documentId) {",
                  "        pm.environment.set('test_file_encryption_id', response.data.documentId);",
                  "        console.log('📋 Document ID saved:', response.data.documentId);",
                  "    }",
                  "    ",
                  "    pm.test('[REQ-B-2.4] File upload encryption successful', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.message).to.include('uploaded');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-2.4] Filename encrypted and unique', function() {",
                  "        const encryptedName = response.data.fileName;",
                  "        ",
                  "        // Verify filename is encrypted (not same as original)",
                  "        pm.expect(encryptedName).to.not.eql('test-image.jpg');",
                  "        pm.expect(encryptedName).to.not.include('test');",
                  "        pm.expect(encryptedName).to.not.include('image');",
                  "        ",
                  "        // Verify encrypted filename format (hash-like with extension)",
                  "        pm.expect(encryptedName).to.match(/^[a-f0-9]{32,}\\.(jpg|jpeg|png|pdf|doc|docx|txt)$/i);",
                  "        ",
                  "        // Verify uniqueness (long encrypted string)",
                  "        pm.expect(encryptedName.split('.')[0].length).to.be.at.least(32);",
                  "        ",
                  "        console.log('✅ [REQ-B-2.4] Filename encryption meets security standards');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-2.4] Database storage validation', function() {",
                  "        // Verify document metadata exists",
                  "        pm.expect(response.data.documentId).to.exist;",
                  "        pm.expect(response.data.fileUrl).to.exist;",
                  "        ",
                  "        console.log('✅ [REQ-B-2.4] Database storage metadata validated');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-2.4] Security compliance - No sensitive data exposed', function() {",
                  "        const responseText = pm.response.text();",
                  "        ",
                  "        // Verify no encryption keys exposed",
                  "        pm.expect(responseText).to.not.include('encryptionKey');",
                  "        pm.expect(responseText).to.not.include('ENCRYPTION_KEY');",
                  "        pm.expect(responseText).to.not.include('secret');",
                  "        pm.expect(responseText).to.not.include('iv');",
                  "        pm.expect(responseText).to.not.include('authTag');",
                  "        ",
                  "        console.log('✅ [REQ-B-2.4] No sensitive encryption data exposed');",
                  "    });",
                  "    ",
                  "} else {",
                  "    console.error('❌ File upload failed:', pm.response.status, pm.response.statusText);",
                  "    pm.test('[REQ-B-2.4] Upload should succeed', function() {",
                  "        pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-2.5] Test Unique Filename Generation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/your/duplicate-name.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "upload"
              ]
            },
            "description": "REQ-B-2.5: Test upload dengan nama file sama - Aplikasi memastikan nama file unik di database"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('File uploaded with unique filename:', response.data.fileName);",
                  "    pm.test('File upload generates unique filename', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.fileName).to.not.eql('duplicate-name.jpg');",
                  "        pm.expect(response.data.isUnique).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-2.1] Add Provider Document - KTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"documentType\": \"KTP\",\n  \"documentName\": \"KTP Siti Nurhaliza\",\n  \"fileUrl\": \"/uploads/documents/ktp-siti-test.jpg\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/providers/documents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "documents"
              ]
            },
            "description": "Test upload dokumen KTP untuk verifikasi [C-6]"
          }
        },
        {
          "name": "[REQ-B-2.1] Add Provider Document - Sertifikat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"documentType\": \"SERTIFIKAT_PELATIHAN\",\n  \"documentName\": \"Sertifikat Teknisi AC BNSP\",\n  \"issuingOrganization\": \"BNSP\",\n  \"credentialId\": \"BNSP-AC-2024-001\",\n  \"fileUrl\": \"/uploads/documents/sertifikat-siti-test.pdf\",\n  \"issuedAt\": \"2024-06-15T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/providers/documents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "documents"
              ]
            },
            "description": "Test upload sertifikat pelatihan untuk verifikasi [C-6]"
          }
        },
        {
          "name": "[REQ-B-2.1] Get Provider Documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/documents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "documents"
              ]
            },
            "description": "Test get dokumen provider sendiri"
          }
        },
        {
          "name": "[REQ-B-2.3] Admin - Get Pending Verifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/verification?status=PENDING",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "verification"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING"
                }
              ]
            },
            "description": "Test admin melihat provider yang pending verifikasi [C-2]"
          }
        },
        {
          "name": "[REQ-B-2.3] Admin - Verify Provider",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"VERIFIED\",\n  \"verifiedAt\": \"2025-07-22T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/verification?providerId={{provider_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "verification"
              ],
              "query": [
                {
                  "key": "providerId",
                  "value": "{{provider_id}}"
                }
              ]
            },
            "description": "Test admin melakukan verifikasi provider [C-2]"
          }
        },
        {
          "name": "[REQ-B-2.3] Admin - Reject Provider",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"REJECTED\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/verification?providerId={{provider_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "verification"
              ],
              "query": [
                {
                  "key": "providerId",
                  "value": "{{provider_id}}"
                }
              ]
            },
            "description": "Test admin menolak verifikasi provider"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-3] API Manajemen Layanan dan Portofolio",
      "item": [
        {
          "name": "[REQ-B-3.1] Create Provider Service",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"categoryId\": 1,\n  \"serviceTitle\": \"Service AC Split 1/2 PK - 1 PK\",\n  \"description\": \"Service lengkap AC split meliputi cuci evaporator, kondensor, filter. Termasuk pengecekan freon dan kebocoran.\",\n  \"price\": 85000,\n  \"priceUnit\": \"per unit\",\n  \"isAvailable\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/providers/services",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "services"
              ]
            },
            "description": "Test create layanan provider baru"
          }
        },
        {
          "name": "[REQ-B-3.1] Get Provider Services",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/services",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "services"
              ]
            },
            "description": "Test get layanan provider sendiri"
          }
        },
        {
          "name": "[REQ-B-3.1] Update Provider Service",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"serviceTitle\": \"Service AC Split 1/2 PK - 1 PK (Updated)\",\n  \"description\": \"Service lengkap AC split meliputi cuci evaporator, kondensor, filter. Termasuk pengecekan freon, kebocoran, dan tune-up sistem.\",\n  \"price\": 90000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/providers/services/{{service_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "services",
                "{{service_id}}"
              ]
            },
            "description": "Test update layanan provider"
          }
        },
        {
          "name": "[REQ-B-3.1] Get Single Service",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/services/{{service_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "services",
                "{{service_id}}"
              ]
            },
            "description": "Test get detail satu layanan"
          }
        },
        {
          "name": "[REQ-B-3.1] Delete Provider Service",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/services/{{service_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "services",
                "{{service_id}}"
              ]
            },
            "description": "Test delete layanan provider (dengan validasi order aktif)"
          }
        },
        {
          "name": "[REQ-B-3.1] Create Portfolio",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectTitle\": \"Service AC Rumah Pak Budi\",\n  \"description\": \"Service 4 unit AC split di rumah Pak Budi, Karawang Barat. Semua AC kembali dingin optimal setelah dibersihkan dan ditune-up.\",\n  \"imageUrl\": \"/uploads/images/portfolio-ac-budi.jpg\",\n  \"completedAt\": \"2025-07-15T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/providers/portfolio",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "portfolio"
              ]
            },
            "description": "Test create portfolio provider"
          }
        },
        {
          "name": "[REQ-B-3.1] Get Provider Portfolio",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/portfolio",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "portfolio"
              ]
            },
            "description": "Test get portfolio provider sendiri"
          }
        },
        {
          "name": "[REQ-B-3.1] Get Portfolio by Provider ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/providers/portfolio?providerId={{provider_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "portfolio"
              ],
              "query": [
                {
                  "key": "providerId",
                  "value": "{{provider_id}}"
                }
              ]
            },
            "description": "Test customer melihat portfolio provider tertentu"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-4] API Penemuan dan Detail Layanan",
      "item": [
        {
          "name": "[REQ-B-4.1] Search Services - Basic",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/services/search?page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "services",
                "search"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Test search layanan basic dengan pagination"
          }
        },
        {
          "name": "[REQ-B-4.1] Search Services - With Filters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/services/search?page=1&limit=5&categoryId=1&verified=true&sortBy=price&sortOrder=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "services",
                "search"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                },
                {
                  "key": "categoryId",
                  "value": "1"
                },
                {
                  "key": "verified",
                  "value": "true"
                },
                {
                  "key": "sortBy",
                  "value": "price"
                },
                {
                  "key": "sortOrder",
                  "value": "asc"
                }
              ]
            },
            "description": "Test search dengan filter kategori, verifikasi, dan sorting"
          }
        },
        {
          "name": "[REQ-B-4.1] Search Services - By Location",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/services/search?district=Karawang&minPrice=50000&maxPrice=200000",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "services",
                "search"
              ],
              "query": [
                {
                  "key": "district",
                  "value": "Karawang"
                },
                {
                  "key": "minPrice",
                  "value": "50000"
                },
                {
                  "key": "maxPrice",
                  "value": "200000"
                }
              ]
            },
            "description": "Test search dengan filter lokasi dan range harga"
          }
        },
        {
          "name": "[REQ-B-4.1] Search Services - By Keyword",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/services/search?search=AC&sortBy=rating&sortOrder=desc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "services",
                "search"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "AC"
                },
                {
                  "key": "sortBy",
                  "value": "rating"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Test search dengan keyword dan sorting by rating [C-11]"
          }
        },
        {
          "name": "[REQ-B-4.1] Get Service Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/service-categories",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "service-categories"
              ]
            },
            "description": "Test get semua kategori layanan dengan count services"
          }
        },
        {
          "name": "[REQ-B-4.1] Get Provider Detail with Rating",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/providers/{{provider_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "{{provider_id}}"
              ]
            },
            "description": "Test get detail provider dengan rating calculation [C-11]"
          }
        },
        {
          "name": "[REQ-B-4.1] Get Provider Detail with Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/providers/3",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "providers",
                "3"
              ]
            },
            "description": "Test get provider dari seeded data dengan reviews"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-5] API Proses Pemesanan",
      "item": [
        {
          "name": "[REQ-B-5.1] Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.id) {",
                  "        pm.environment.set('order_id', response.data.id);",
                  "        console.log('Order ID saved:', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"providerServiceId\": 4,\n  \"customMessage\": \"Need MacBook Pro repair - screen flickering and overheating issues\",\n  \"scheduledDate\": \"2025-07-30T10:00:00.000Z\",\n  \"jobAddress\": \"Jl. Customer No. 123, Jakarta Pusat\",\n  \"district\": \"Jakarta Pusat\",\n  \"subDistrict\": \"Menteng\",\n  \"ward\": \"Gondangdia\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders"
              ]
            },
            "description": "Customer creates new order with location details"
          }
        },
        {
          "name": "[REQ-B-5.1] Get Customer Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders?page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Customer views their order history with pagination"
          }
        },
        {
          "name": "[REQ-B-5.1] Get Provider Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders?status=PENDING_ACCEPTANCE&page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING_ACCEPTANCE"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Provider views pending orders for acceptance"
          }
        },
        {
          "name": "[REQ-B-5.2] Provider Accept Order",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"ACCEPTED\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "Provider accepts the order"
          }
        },
        {
          "name": "[REQ-B-5.2] Provider Reject Order",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"REJECTED_BY_PROVIDER\",\n  \"information\": \"Sorry, I'm fully booked this week. Please reschedule for next week.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "Provider rejects order with reason (using 'information' field)"
          }
        },
        {
          "name": "[REQ-B-5.2] Update Order to In Progress",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"IN_PROGRESS\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "Provider starts working on the order"
          }
        },
        {
          "name": "[REQ-B-5.2] Complete Order",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"COMPLETED\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "Provider completes the order"
          }
        },
        {
          "name": "[REQ-B-5.3] Get Single Order Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "Get detailed order information"
          }
        },
        {
          "name": "[REQ-B-5.4] Update Provider Attendance Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attendanceStatus\": \"ARRIVED\",\n  \"arrivalTime\": \"2025-09-06T10:30:00.000Z\",\n  \"providerNotes\": \"Arrived at customer location, ready to start work\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/attendance",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "attendance"
              ]
            },
            "description": "REQ-B-5.4: Provider update attendance status - ON_THE_WAY, ARRIVED, WORKING, COMPLETED"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Attendance updated:', response.data.attendanceStatus);",
                  "    pm.test('Attendance status updated successfully', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.attendanceStatus).to.eql('ARRIVED');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-5.4] Get Provider Attendance Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/attendance",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "attendance"
              ]
            },
            "description": "REQ-B-5.4: Get current provider attendance status and information"
          }
        },
        {
          "name": "[REQ-B-5.5] Customer Verify Provider Data",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"verificationStatus\": \"verified\",\n  \"feedback\": \"Provider arrived on time and completed work professionally. Highly recommended!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/customer-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "customer-verification"
              ]
            },
            "description": "REQ-B-5.5: Customer verifies provider data and work completion"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Customer verification updated:', response.data.order.verificationStatus);",
                  "    pm.test('Customer verification successful', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.order.verificationStatus).to.eql('verified');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-5.5] Get Customer Verification Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/customer-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "customer-verification"
              ]
            },
            "description": "REQ-B-5.5: Get current customer verification status"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-6] API Rincian Pesanan dan Biaya",
      "item": [
        {
          "name": "[REQ-B-6.1] Add Order Detail Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.id) {",
                  "        pm.environment.set('order_detail_id', response.data.id);",
                  "        console.log('Order Detail ID saved:', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Thermal Paste Replacement - High-quality thermal paste for better heat dissipation\",\n  \"quantity\": 1,\n  \"pricePerUnit\": 50000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details"
              ]
            },
            "description": "Provider adds additional item to order"
          }
        },
        {
          "name": "[REQ-B-6.1] Add Second Order Detail",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Screen Replacement - Original Apple Retina Display\",\n  \"quantity\": 1,\n  \"pricePerUnit\": 2500000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details"
              ]
            },
            "description": "Provider adds expensive screen replacement"
          }
        },
        {
          "name": "[REQ-B-6.1] Get Order Details List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details"
              ]
            },
            "description": "Customer views all order details with cost summary"
          }
        },
        {
          "name": "[REQ-B-6.1] Customer Approve Detail",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"APPROVED\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details/{{order_detail_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details",
                "{{order_detail_id}}"
              ]
            },
            "description": "Customer approves specific order detail"
          }
        },
        {
          "name": "[REQ-B-6.1] Customer Reject Detail",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"REJECTED\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details/2",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details",
                "2"
              ]
            },
            "description": "Customer rejects expensive screen replacement"
          }
        },
        {
          "name": "[REQ-B-6.1] Delete Rejected Detail",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details/2",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details",
                "2"
              ]
            },
            "description": "Provider removes rejected detail"
          }
        },
        {
          "name": "[REQ-B-6.1] Final Order Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/orders/{{order_id}}/details",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "details"
              ]
            },
            "description": "Final order details with approved items only"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-7] API Ulasan dan Pelaporan",
      "item": [
        {
          "name": "[REQ-B-7.1] Create Review (C-9 Compliance)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.id) {",
                  "        pm.environment.set('review_id', response.data.id);",
                  "        console.log('Review ID saved:', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": \"{{order_id}}\",\n  \"rating\": 5,\n  \"comment\": \"Excellent service! Fanza was very professional and fixed my MacBook perfectly. The thermal paste replacement made a huge difference. Highly recommended!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reviews",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "reviews"
              ]
            },
            "description": "Customer creates review for completed order (C-9: only COMPLETED orders)"
          }
        },
        {
          "name": "[REQ-B-7.1] Try Create Review - Order Not Completed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": 1,\n  \"rating\": 4,\n  \"comment\": \"This should fail - order not completed yet\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reviews",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "reviews"
              ]
            },
            "description": "Test C-9 validation - should fail for non-completed orders"
          }
        },
        {
          "name": "[REQ-B-7.1] Get Reviews for Provider",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/reviews?providerId={{provider_id}}&page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "reviews"
              ],
              "query": [
                {
                  "key": "providerId",
                  "value": "{{provider_id}}"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get all reviews for specific provider with pagination"
          }
        },
        {
          "name": "[REQ-B-7.1] Get Reviews - High Rating Filter",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/reviews?minRating=4&sortBy=rating&sortOrder=desc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "reviews"
              ],
              "query": [
                {
                  "key": "minRating",
                  "value": "4"
                },
                {
                  "key": "sortBy",
                  "value": "rating"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Filter reviews with minimum rating 4"
          }
        },
        {
          "name": "[REQ-B-7.3] Report Review - Auto-Hide Feature [C-10] [REQ-B-7.2]",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.id) {",
                  "        pm.environment.set('review_report_id', response.data.id);",
                  "        console.log('Review Report ID saved:', response.data.id);",
                  "    }",
                  "    // Verify auto-hide message for REQ-B-7.2",
                  "    if (response.message && response.message.includes('automatically hidden')) {",
                  "        console.log('✅ [REQ-B-7.2] Auto-hide feature working: Review automatically hidden');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{other_provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reviewId\": \"{{review_id}}\",\n  \"reason\": \"INAPPROPRIATE_CONTENT\",\n  \"description\": \"This review contains promotional content and seems suspicious\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/review-reports",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports"
              ]
            },
            "description": "Reports review from different user. [C-10] Review is automatically hidden (isShow=false) when reported. [REQ-B-7.2] API processes report and updates isShow status."
          }
        },
        {
          "name": "[REQ-B-7.3] Try Report Own Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reviewId\": \"{{review_id}}\",\n  \"reason\": \"SPAM\",\n  \"description\": \"This should fail - can't report own review\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/review-reports",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports"
              ]
            },
            "description": "Test validation - customer cannot report their own review"
          }
        },
        {
          "name": "[REQ-B-7.3] Admin - Get Review Reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/review-reports?status=PENDING_REVIEW&page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING_REVIEW"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Admin views pending review reports"
          }
        },
        {
          "name": "[REQ-B-7.3] Admin - Resolve Report (Keep Review)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"RESOLVED_REVIEW_KEPT\",\n  \"adminNotes\": \"Report reviewed. The review content appears to be genuine customer feedback and does not contain inappropriate language. Report rejected, review will remain visible.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/review-reports/{{review_report_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports",
                "{{review_report_id}}"
              ]
            },
            "description": "Admin resolves report and keeps review visible. [C-10] [REQ-B-7.2] Review becomes visible again (isShow=true) when admin rejects report."
          }
        },
        {
          "name": "[REQ-B-7.3] Admin - Resolve Report (Remove Review)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"RESOLVED_REVIEW_REMOVED\",\n  \"adminNotes\": \"Report validated. The review contains inappropriate content and has been hidden from public view.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/review-reports/{{review_report_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports",
                "{{review_report_id}}"
              ]
            },
            "description": "Admin resolves report and hides review permanently. [C-10] [REQ-B-7.2] Review remains hidden (isShow=false) when admin approves report."
          }
        },
        {
          "name": "[REQ-B-7.3] Admin - Get Single Report Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/review-reports/{{review_report_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "review-reports",
                "{{review_report_id}}"
              ]
            },
            "description": "Admin views detailed report information"
          }
        },
        {
          "name": "[REQ-B-7.4] Customer Edit Review",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"comment\": \"Updated review: Setelah dipikir-pikir, pekerjaan sangat memuaskan! Pelayanan profesional dan hasil kerja berkualitas tinggi. Highly recommended!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/customer/reviews/{{review_id}}/edit",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "reviews",
                "{{review_id}}",
                "edit"
              ]
            },
            "description": "REQ-B-7.4: Customer can edit their own review content"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Review updated successfully');",
                  "    pm.test('Review edit successful', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.rating).to.eql(5);",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-7.5] Admin Get Hidden Reviews",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/reviews/hidden?page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "reviews",
                "hidden"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "REQ-B-7.5: Admin retrieves all reviews with is_show = false (hidden reviews)"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-8] Chat System APIs",
      "item": [
        {
          "name": "[REQ-B-8.1] Get User Chat Conversations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/chat/rooms",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms"
              ]
            },
            "description": "Get user's chat conversations with participants and last messages"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('chat_conversation_id', response.data[0].id);",
                  "        console.log('Chat conversation ID saved:', response.data[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-8.1] Create Chat Conversation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"participantUserId\": {{provider_id}},\n  \"orderId\": {{order_id}},\n  \"conversationTitle\": \"Discussion about Order #{{order_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat/rooms",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms"
              ]
            },
            "description": "Create new chat conversation between customer and provider"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('chat_conversation_id', response.data.id);",
                  "    console.log('Chat conversation created with ID:', response.data.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-8.2] Get Conversation Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/chat/rooms/{{chat_conversation_id}}/messages?page=1&limit=50",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms",
                "{{chat_conversation_id}}",
                "messages"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Get paginated messages from a conversation"
          }
        },
        {
          "name": "[REQ-B-8.2] Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"messageContent\\\": \\\"{{test_encrypted_message}}\\\"\\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat/rooms/{{chat_conversation_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms",
                "{{chat_conversation_id}}",
                "messages"
              ]
            },
            "description": "REQ-B-8.2: Aplikasi harus memastikan data pesan yang disimpan dalam database adalah hasil enkripsi dari sisi klien. Constraint [C-7]: Chat harus dienkripsi end-to-end"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "console.log('\\n🔐 [REQ-B-8.2] Chat Message End-to-End Encryption Test - C-7 Constraint');",
                  "console.log('🔒 C-7 Constraint: Chat harus dienkripsi end-to-end');",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    console.log('✅ Message sent successfully');",
                  "    console.log('📝 Original message:', pm.environment.get('test_encrypted_message'));",
                  "    console.log('💬 Message ID:', response.data.id);",
                  "    ",
                  "    // Save message ID for verification",
                  "    if (response.data.id) {",
                  "        pm.environment.set('chat_message_id', response.data.id);",
                  "        pm.environment.set('test_message_id', response.data.id);",
                  "        console.log('📋 Message ID saved for verification');",
                  "    }",
                  "    ",
                  "    pm.test('[REQ-B-8.2] Message sent successfully', function() {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.id).to.exist;",
                  "        pm.expect(response.message).to.include('sent');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-8.2] C-7 End-to-end encryption constraint validation', function() {",
                  "        const responseText = pm.response.text();",
                  "        const originalMessage = pm.environment.get('test_encrypted_message');",
                  "        ",
                  "        // C-7: Chat harus dienkripsi end-to-end",
                  "        // Verify message encrypted before sending to server (client-side encryption)",
                  "        if (originalMessage && originalMessage.length > 10) {",
                  "            // Server should not see plaintext message in any form",
                  "            pm.expect(responseText).to.not.include(originalMessage);",
                  "            console.log('✅ End-to-end encryption: Original message not visible to server');",
                  "        }",
                  "        ",
                  "        // Verify no encryption keys or metadata exposed (end-to-end security)",
                  "        pm.expect(responseText).to.not.include('encryptionKey');",
                  "        pm.expect(responseText).to.not.include('CHAT_ENCRYPTION_KEY');",
                  "        pm.expect(responseText).to.not.include('encryptionIV');",
                  "        pm.expect(responseText).to.not.include('secret');",
                  "        pm.expect(responseText).to.not.include('privateKey');",
                  "        pm.expect(responseText).to.not.include('publicKey');",
                  "        ",
                  "        console.log('✅ [C-7] End-to-end encryption constraint satisfied');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-8.2] End-to-end encryption database validation', function() {",
                  "        // C-7: Messages should be encrypted end-to-end and stored encrypted",
                  "        // Database should only contain encrypted messages, never plaintext",
                  "        pm.expect(response.data.conversationId).to.exist;",
                  "        pm.expect(response.data.senderId).to.exist;",
                  "        ",
                  "        console.log('✅ [C-7] Message stored with end-to-end encryption (will verify in database check)');",
                  "    });",
                  "    ",
                  "    pm.test('[REQ-B-8.2] End-to-end encryption performance', function() {",
                  "        const responseTime = pm.response.responseTime;",
                  "        const threshold = parseInt(pm.environment.get('encryption_performance_threshold')) || 5;",
                  "        ",
                  "        // C-7: End-to-end encryption should not significantly impact performance",
                  "        pm.expect(responseTime).to.be.below(threshold * 1000); // Convert to ms",
                  "        console.log(`✅ [C-7] End-to-end encryption performance: ${responseTime}ms (threshold: ${threshold}s)`);",
                  "    });",
                  "    ",
                  "} else {",
                  "    console.error('❌ Message send failed:', pm.response.status, pm.response.statusText);",
                  "    pm.test('[REQ-B-8.2] Message send should succeed', function() {",
                  "        pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-8.2] Provider Reply Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"messageContent\": \"I can start tomorrow morning at 9 AM. Is that convenient for you?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat/rooms/{{chat_conversation_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms",
                "{{chat_conversation_id}}",
                "messages"
              ]
            },
            "description": "Provider replies to customer message"
          }
        },
        {
          "name": "[REQ-B-8.2] Mark Messages as Read",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/chat/rooms/{{chat_conversation_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "rooms",
                "{{chat_conversation_id}}",
                "messages"
              ]
            },
            "description": "Mark all unread messages as read for current user"
          }
        },
        {
          "name": "[REQ-B-8.4] Get Pending Chat Access Requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/customer/chat-access/respond?status=PENDING",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "chat-access",
                "respond"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING"
                }
              ]
            },
            "description": "REQ-B-8.4: Get pending chat access requests from admin"
          }
        },
        {
          "name": "[REQ-B-8.4] Customer Generate Chat Access for Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"requestId\": 1,\n  \"action\": \"approve\",\n  \"response\": \"{{chat_access_context}}\",\n  \"accessHours\": 24\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/customer/chat-access/respond",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "chat-access",
                "respond"
              ]
            },
            "description": "REQ-B-8.4: Customer responds to admin chat access request.\nParameters:\n- requestId: ID of admin's chat access request\n- action: 'approve' or 'reject'\n- response: Customer's response message\n- accessHours: Duration of access (optional, default 24 hours)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.accessToken) {",
                  "        pm.environment.set('chat_access_token', response.data.accessToken);",
                  "        console.log('✅ [REQ-B-8.4] Chat access token generated:', response.data.accessToken);",
                  "    }",
                  "    console.log('✅ [REQ-B-8.4] Customer chat access response processed successfully');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "[REQ-B-9] Admin Dashboard APIs",
      "item": [
        {
          "name": "[REQ-B-9.1] Get Dashboard Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/dashboard",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "dashboard"
              ]
            },
            "description": "Get comprehensive dashboard statistics for admin"
          }
        },
        {
          "name": "[REQ-B-9.2] Get Service Categories (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/categories",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "categories"
              ]
            },
            "description": "Get all service categories with statistics"
          }
        },
        {
          "name": "[REQ-B-9.2] Create Service Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"categoryName\": \"Pet Care Services\",\n  \"description\": \"Professional pet care and grooming services\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/categories",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "categories"
              ]
            },
            "description": "Create new service category"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('admin_category_id', response.data.id);",
                  "    console.log('Category created with ID:', response.data.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-9.2] Get Single Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/categories/{{admin_category_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "categories",
                "{{admin_category_id}}"
              ]
            },
            "description": "Get specific category with detailed statistics"
          }
        },
        {
          "name": "[REQ-B-9.2] Update Service Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Pet Care & Grooming Services\",\n  \"description\": \"Professional pet care, grooming, and wellness services\",\n  \"iconUrl\": \"/icons/pet-care.svg\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/categories/{{admin_category_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "categories",
                "{{admin_category_id}}"
              ]
            },
            "description": "Update service category details"
          }
        },
        {
          "name": "[REQ-B-9.2] Delete Service Category",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/categories/{{admin_category_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "categories",
                "{{admin_category_id}}"
              ]
            },
            "description": "Delete service category (only if no associated services)"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-10] Admin Settings APIs",
      "item": [
        {
          "name": "[REQ-B-10.1] Get Application Settings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/settings",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings"
              ]
            },
            "description": "Get all application settings"
          }
        },
        {
          "name": "[REQ-B-10.1] Create Application Setting",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingKey\": \"{{setting_key}}\",\n  \"settingValue\": \"{{setting_value}}\",\n  \"description\": \"Test setting for API validation\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/settings",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings"
              ]
            },
            "description": "Create new application setting"
          }
        },
        {
          "name": "[REQ-B-10.1] Bulk Update Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settings\": [\n    {\n      \"settingKey\": \"app_name\",\n      \"settingValue\": \"E-Kerja Platform\",\n      \"description\": \"Application name displayed to users\"\n    },\n    {\n      \"settingKey\": \"maintenance_mode\",\n      \"settingValue\": \"false\",\n      \"description\": \"Enable/disable maintenance mode\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/settings",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings"
              ]
            },
            "description": "Bulk update multiple settings"
          }
        },
        {
          "name": "[REQ-B-10.2] Get Specific Setting",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/settings/{{setting_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings",
                "{{setting_key}}"
              ]
            },
            "description": "Get specific setting by key"
          }
        },
        {
          "name": "[REQ-B-10.2] Update Specific Setting",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": \"updated_test_value\",\n  \"description\": \"Updated test setting description\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/settings/{{setting_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings",
                "{{setting_key}}"
              ]
            },
            "description": "Update specific setting by key"
          }
        },
        {
          "name": "[REQ-B-10.2] Delete Specific Setting",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/settings/{{setting_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "settings",
                "{{setting_key}}"
              ]
            },
            "description": "Delete specific setting by key"
          }
        },
        {
          "name": "[REQ-B-10.3] Get FAQs (Public Access)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs?category={{faq_category}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "{{faq_category}}"
                }
              ]
            },
            "description": "Get active FAQs with category filter (public access)"
          }
        },
        {
          "name": "[REQ-B-10.3] Get FAQs (Admin Access)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ]
            },
            "description": "Get all FAQs including inactive ones (admin access)"
          }
        },
        {
          "name": "[REQ-B-10.3] Create FAQ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question\": \"How do I book a service?\",\n  \"answer\": \"You can book a service by browsing our providers, selecting the service you need, and clicking the 'Book Now' button. You'll need to provide details about your requirements and schedule.\",\n  \"category\": \"booking\",\n  \"displayOrder\": 1,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/faqs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ]
            },
            "description": "Create new FAQ"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('faq_id', response.data.id);",
                  "    console.log('FAQ created with ID:', response.data.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-10.3] Get Single FAQ",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs/{{faq_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs",
                "{{faq_id}}"
              ]
            },
            "description": "Get specific FAQ (public access for active FAQs)"
          }
        },
        {
          "name": "[REQ-B-10.3] Update FAQ",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question\": \"How do I book a service?\",\n  \"answer\": \"You can book a service by browsing our providers, selecting the service you need, and clicking the 'Book Now' button. You'll need to provide details about your requirements, schedule, and location.\",\n  \"category\": \"booking\",\n  \"displayOrder\": 1,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/faqs/{{faq_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs",
                "{{faq_id}}"
              ]
            },
            "description": "Update FAQ content"
          }
        },
        {
          "name": "[REQ-B-10.3] Delete FAQ",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs/{{faq_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs",
                "{{faq_id}}"
              ]
            },
            "description": "Delete FAQ"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-11] Advanced FAQ Management System",
      "item": [
        {
          "name": "[REQ-B-11.1] Get FAQs with Data Table Parameters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs?search={{faq_search}}&sortBy={{faq_sort_by}}&sortOrder={{faq_sort_order}}&page={{faq_page}}&limit={{faq_limit}}&category={{faq_category}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "{{faq_search}}",
                  "description": "Search term untuk questions dan answers"
                },
                {
                  "key": "sortBy",
                  "value": "{{faq_sort_by}}",
                  "description": "Field untuk sorting: displayOrder, question, category, isActive, createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "{{faq_sort_order}}",
                  "description": "Sort direction: asc atau desc"
                },
                {
                  "key": "page",
                  "value": "{{faq_page}}",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "{{faq_limit}}",
                  "description": "Items per page"
                },
                {
                  "key": "category",
                  "value": "{{faq_category}}",
                  "description": "Filter by category"
                }
              ]
            },
            "description": "Test FAQ management dengan advanced data table features: search, sort, pagination"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('FAQ data table response structure', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('pagination');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('page');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('limit');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('total');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('totalPages');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('hasNext');",
                  "    pm.expect(jsonData.data.pagination).to.have.property('hasPrev');",
                  "});",
                  "",
                  "pm.test('FAQ display order functionality', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.data.length > 0) {",
                  "        jsonData.data.data.forEach(faq => {",
                  "            pm.expect(faq).to.have.property('displayOrder');",
                  "        });",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-11.2] Get FAQs (Public Access with Data Table)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/faqs?search=book&sortBy=displayOrder&sortOrder=asc&page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "book",
                  "description": "Public search for booking FAQs"
                },
                {
                  "key": "sortBy",
                  "value": "displayOrder",
                  "description": "Sort by display order"
                },
                {
                  "key": "sortOrder",
                  "value": "asc",
                  "description": "Ascending order"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "First page"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "10 items per page"
                }
              ]
            },
            "description": "Test public FAQ access dengan data table functionality (no auth required)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Public FAQ access shows only active FAQs', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.isAdmin).to.be.false;",
                  "    if (jsonData.data.data.length > 0) {",
                  "        jsonData.data.data.forEach(faq => {",
                  "            pm.expect(faq.isActive).to.be.true;",
                  "        });",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-11.3] Create FAQ with Display Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question\": \"How to cancel an order?\",\n  \"answer\": \"You can cancel an order by going to your order history and clicking the cancel button. Cancellation is only allowed before the provider accepts the order.\",\n  \"category\": \"orders\",\n  \"displayOrder\": 2,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/faqs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "faqs"
              ]
            },
            "description": "Create FAQ dengan display order untuk mengatur sequence"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('new_faq_id', jsonData.data.id);",
                  "    console.log('FAQ created with ID:', jsonData.data.id);",
                  "    console.log('Display order:', jsonData.data.displayOrder);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "[REQ-B-12] Data Tables Implementation",
      "item": [
        {
          "name": "[REQ-B-12.1] Customer Management with Data Tables",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/customers?search={{customer_search}}&sortBy={{customer_sort_by}}&sortOrder={{customer_sort_order}}&page={{page}}&limit={{limit}}&isActive={{customer_is_active}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "customers"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "{{customer_search}}",
                  "description": "Search customers by name, email, phone"
                },
                {
                  "key": "sortBy",
                  "value": "{{customer_sort_by}}",
                  "description": "Sort field: fullName, email, createdAt, isActive"
                },
                {
                  "key": "sortOrder",
                  "value": "{{customer_sort_order}}",
                  "description": "Sort direction: asc atau desc"
                },
                {
                  "key": "page",
                  "value": "{{page}}",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "{{limit}}",
                  "description": "Items per page"
                },
                {
                  "key": "isActive",
                  "value": "{{customer_is_active}}",
                  "description": "Filter by active status: true/false"
                }
              ]
            },
            "description": "Test customer management dengan search, sort, filter, pagination"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Customer data table response structure', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('pagination');",
                  "});",
                  "",
                  "pm.test('Customer data includes count statistics', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.data.length > 0) {",
                  "        const customer = jsonData.data.data[0];",
                  "        pm.expect(customer).to.have.property('_count');",
                  "        pm.expect(customer._count).to.have.property('customerOrders');",
                  "        pm.expect(customer._count).to.have.property('customerReviews');",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-12.2] Provider Management with Data Tables",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/providers?search={{provider_search}}&sortBy={{provider_sort_by}}&sortOrder={{provider_sort_order}}&page={{page}}&limit={{limit}}&isActive={{provider_is_active}}&verificationStatus={{provider_verification_status}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "providers"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "{{provider_search}}",
                  "description": "Search providers by name, email, phone, bio"
                },
                {
                  "key": "sortBy",
                  "value": "{{provider_sort_by}}",
                  "description": "Sort field: fullName, email, createdAt, verificationStatus, isActive"
                },
                {
                  "key": "sortOrder",
                  "value": "{{provider_sort_order}}",
                  "description": "Sort direction: asc atau desc"
                },
                {
                  "key": "page",
                  "value": "{{page}}",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "{{limit}}",
                  "description": "Items per page"
                },
                {
                  "key": "isActive",
                  "value": "{{provider_is_active}}",
                  "description": "Filter by active status"
                },
                {
                  "key": "verificationStatus",
                  "value": "{{provider_verification_status}}",
                  "description": "Filter by verification: PENDING, VERIFIED, REJECTED"
                }
              ]
            },
            "description": "Test provider management dengan verification status filtering"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Provider data includes verification info', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.data.length > 0) {",
                  "        const provider = jsonData.data.data[0];",
                  "        pm.expect(provider).to.have.property('verificationStatus');",
                  "        pm.expect(provider).to.have.property('_count');",
                  "        pm.expect(provider._count).to.have.property('providerServices');",
                  "        pm.expect(provider._count).to.have.property('providerOrders');",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-12.3] Order Management with Data Tables",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/orders?search={{order_search}}&sortBy={{order_sort_by}}&sortOrder={{order_sort_order}}&page={{page}}&limit={{limit}}&status={{order_status}}&dateFrom={{order_date_from}}&dateTo={{order_date_to}}&minAmount={{order_min_amount}}&maxAmount={{order_max_amount}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "orders"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "{{order_search}}",
                  "description": "Search orders by address, customer name, provider name"
                },
                {
                  "key": "sortBy",
                  "value": "{{order_sort_by}}",
                  "description": "Sort field: orderDate, scheduledDate, status, finalAmount, customer.fullName, provider.fullName"
                },
                {
                  "key": "sortOrder",
                  "value": "{{order_sort_order}}",
                  "description": "Sort direction: asc atau desc"
                },
                {
                  "key": "page",
                  "value": "{{page}}",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "{{limit}}",
                  "description": "Items per page"
                },
                {
                  "key": "status",
                  "value": "{{order_status}}",
                  "description": "Filter by order status"
                },
                {
                  "key": "dateFrom",
                  "value": "{{order_date_from}}",
                  "description": "Filter orders from date (YYYY-MM-DD)"
                },
                {
                  "key": "dateTo",
                  "value": "{{order_date_to}}",
                  "description": "Filter orders to date (YYYY-MM-DD)"
                },
                {
                  "key": "minAmount",
                  "value": "{{order_min_amount}}",
                  "description": "Minimum order amount"
                },
                {
                  "key": "maxAmount",
                  "value": "{{order_max_amount}}",
                  "description": "Maximum order amount"
                }
              ]
            },
            "description": "Test order management dengan advanced filtering (status, date range, amount range)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Order data includes customer and provider info', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.data.length > 0) {",
                  "        const order = jsonData.data.data[0];",
                  "        pm.expect(order).to.have.property('customer');",
                  "        pm.expect(order).to.have.property('provider');",
                  "        pm.expect(order).to.have.property('providerService');",
                  "        pm.expect(order.customer).to.have.property('fullName');",
                  "        pm.expect(order.provider).to.have.property('fullName');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Order data includes filters in response', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('filters');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-12.4] Nested Field Search and Sort Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/orders?search=Fanza&sortBy=customer.fullName&sortOrder=asc&page=1&limit=5",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "orders"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "Fanza",
                  "description": "Search for orders by customer name"
                },
                {
                  "key": "sortBy",
                  "value": "customer.fullName",
                  "description": "Sort by nested field - customer name"
                },
                {
                  "key": "sortOrder",
                  "value": "asc",
                  "description": "Ascending sort"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "First page"
                },
                {
                  "key": "limit",
                  "value": "5",
                  "description": "5 items per page"
                }
              ]
            },
            "description": "Test nested field search dan sort functionality - cari 'Fanza' dan sort by customer.fullName"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Nested field search working', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.search).to.equal('Fanza');",
                  "    if (jsonData.data.data.length > 0) {",
                  "        // Check if customer name contains search term",
                  "        const foundOrder = jsonData.data.data.some(order => ",
                  "            order.customer.fullName.toLowerCase().includes('fanza'.toLowerCase())",
                  "        );",
                  "        pm.expect(foundOrder).to.be.true;",
                  "    }",
                  "});",
                  "",
                  "pm.test('Nested field sort working', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.sort.field).to.equal('customer.fullName');",
                  "    pm.expect(jsonData.data.sort.order).to.equal('asc');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "[REQ-B-12.5] Update Customer Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": {{customer_id}},\n  \"isActive\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/customers",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "customers"
              ]
            },
            "description": "Test customer status update via admin"
          }
        },
        {
          "name": "[REQ-B-12.6] Update Provider Verification",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"providerId\": {{provider_id}},\n  \"verificationStatus\": \"VERIFIED\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/providers",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "providers"
              ]
            },
            "description": "Test provider verification status update via admin"
          }
        },
        {
          "name": "[REQ-B-12.7] Update Order Status (Admin)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": {{order_id}},\n  \"status\": \"COMPLETED\",\n  \"adminNotes\": \"Order completed by admin intervention\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "orders"
              ]
            },
            "description": "Test order status update dengan admin notes"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-13] Statistics APIs",
      "item": [
        {
          "name": "[REQ-B-13.1] Provider Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/provider/statistics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "provider",
                "statistics"
              ]
            },
            "description": "Get comprehensive provider dashboard statistics including order metrics, ratings, and revenue"
          }
        },
        {
          "name": "[REQ-B-13.2] Customer Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/customer/statistics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "statistics"
              ]
            },
            "description": "Get customer platform insights including order history, service usage, and provider ratings"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-14] Order Status APIs",
      "item": [
        {
          "name": "[REQ-B-14.1] Provider Order Status Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/provider/order-status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "provider",
                "order-status"
              ]
            },
            "description": "Get provider's order status summary with counts and action indicators"
          }
        },
        {
          "name": "[REQ-B-14.2] Customer Order Status Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/customer/order-status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "order-status"
              ]
            },
            "description": "Get customer's order status summary with counts and required actions"
          }
        },
        {
          "name": "[REQ-B-14.3] Customer Pending Reviews",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/customer/pending-reviews",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "pending-reviews"
              ]
            },
            "description": "Get completed orders that are pending customer review"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-15] Email Verification APIs",
      "item": [
        {
          "name": "[REQ-B-15.1] Registration Verification - Send Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{verification_email}}\",\n  \"fullName\": \"{{verification_full_name}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/registration-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "registration-verification"
              ]
            },
            "description": "Send 6-digit verification code for registration process"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.verificationCode) {",
                  "        pm.environment.set('registration_verification_code', response.data.verificationCode);",
                  "        console.log('Registration verification code saved:', response.data.verificationCode);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "[REQ-B-15.1] Registration Verification - Verify Code",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{verification_email}}\",\n  \"verificationCode\": \"{{registration_verification_code}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/registration-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "registration-verification"
              ]
            },
            "description": "Verify registration email with 6-digit code"
          }
        },
        {
          "name": "[REQ-B-15.2] Password Reset Verification - Send Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{verification_email}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/password-reset-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "password-reset-verification"
              ]
            },
            "description": "Send 6-digit verification code for password reset"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.verificationCode) {",
                  "        pm.environment.set('password_reset_verification_code', response.data.verificationCode);",
                  "        console.log('Password reset verification code saved:', response.data.verificationCode);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "[REQ-B-15.2] Password Reset Verification - Verify Code",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{verification_email}}\",\n  \"verificationCode\": \"{{password_reset_verification_code}}\",\n  \"newPassword\": \"{{new_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/password-reset-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "password-reset-verification"
              ]
            },
            "description": "Verify password reset code and update password"
          }
        },
        {
          "name": "[REQ-B-15.3] Order Status Verification - Send Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": {{order_id}},\n  \"newStatus\": \"{{order_new_status}}\",\n  \"customerEmail\": \"{{customer_email}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/order-status-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "order-status-verification"
              ]
            },
            "description": "Send verification code for order status change"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.verificationCode) {",
                  "        pm.environment.set('order_status_verification_code', response.data.verificationCode);",
                  "        console.log('✅ [REQ-B-15.3] Order status verification code saved:', response.data.verificationCode);",
                  "    }",
                  "    console.log('✅ [REQ-B-15.3] Email verification sent for order status change');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "[REQ-B-15.3] Order Status Verification - Verify Code",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": {{order_id}},\n  \"code\": \"{{order_status_verification_code}}\",\n  \"newStatus\": \"{{order_new_status}}\",\n  \"customerEmail\": \"{{customer_email}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/email/order-status-verification",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "email",
                "order-status-verification"
              ]
            },
            "description": "Verify order status change with verification code"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('✅ [REQ-B-15.3] Order status successfully changed via email verification');",
                  "    if (response.data && response.data.newStatus) {",
                  "        console.log('✅ [REQ-B-15.3] New order status:', response.data.newStatus);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "[REQ-B-8.3] Admin Chat Access - Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": {{customer_id}},\n  \"reason\": \"{{chat_access_reason}}\",\n  \"context\": \"{{chat_access_context}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/chat-access/request",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "chat-access",
                "request"
              ]
            },
            "description": "Admin requests access to customer's chat conversations"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.environment.set('chat_access_token', response.data.token);",
                  "        console.log('Chat access token saved:', response.data.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "[REQ-B-8.3] Customer Chat Access - Respond",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{chat_access_token}}\",\n  \"approved\": {{chat_access_approved}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/customer/chat-access/respond",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "customer",
                "chat-access",
                "respond"
              ]
            },
            "description": "Customer responds to admin's chat access request"
          }
        },
        {
          "name": "[REQ-B-8.3] Admin Chat Access - View Conversations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/chat-access/view?token={{chat_access_token}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "chat-access",
                "view"
              ],
              "query": [
                {
                  "key": "token",
                  "value": "{{chat_access_token}}"
                }
              ]
            },
            "description": "Admin views customer's chat conversations using approved access token"
          }
        }
      ]
    },
    {
      "name": "[REQ-B-2.4 & 8.2] API Enkripsi Testing",
      "item": [
        {
          "name": "[REQ-B-8.2] Test Chat Encryption - Basic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"testType\": \"chat\",\n  \"data\": {\n    \"message\": \"{{test_chat_message}}\",\n    \"userId\": \"{{customer_id}}\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "encryption"
              ]
            },
            "description": "Test enkripsi dan dekripsi pesan chat untuk REQ-B-8.2. Memverifikasi bahwa pesan dapat dienkripsi dan didekripsi dengan benar menggunakan AES-256-CBC."
          },
          "response": []
        },
        {
          "name": "[REQ-B-2.4] Test Filename Encryption - Basic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"testType\": \"filename\",\n  \"data\": {\n    \"filename\": \"{{test_filename}}\",\n    \"userId\": \"{{provider_id}}\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "encryption"
              ]
            },
            "description": "Test enkripsi nama file untuk REQ-B-2.4. Memverifikasi bahwa nama file dienkripsi dengan aman dan unik, serta extension tetap dipertahankan."
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Test Chat Database Encryption - Create Conversation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"create_conversation\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/database-encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "database-encryption"
              ]
            },
            "description": "Membuat percakapan test untuk testing enkripsi database. Memerlukan autentikasi customer.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Extract conversation ID untuk testing selanjutnya",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    if (response.data && response.data.conversationId) {",
                    "        pm.environment.set('test_conversation_id', response.data.conversationId);",
                    "        console.log('✅ Test Conversation ID extracted:', response.data.conversationId);",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Test Chat Database Encryption - Send Encrypted Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"send_message\",\n  \"conversationId\": {{test_conversation_id}},\n  \"message\": \"{{test_encrypted_message}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/database-encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "database-encryption"
              ]
            },
            "description": "Mengirim pesan terenkripsi ke database. Pesan akan dienkripsi sebelum disimpan dan dapat didekripsi saat diambil.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Verify message was encrypted and stored",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ Message encrypted and stored successfully');",
                    "    console.log('Original Message:', response.data.originalMessage);",
                    "    console.log('Encrypted in DB:', response.data.encryptedInDatabase.substring(0, 50) + '...');",
                    "    ",
                    "    // Store message ID for further testing",
                    "    if (response.data.messageId) {",
                    "        pm.environment.set('test_message_id', response.data.messageId);",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Test Chat Database Encryption - Get Decrypted Messages",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"get_messages\",\n  \"conversationId\": {{test_conversation_id}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/database-encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "database-encryption"
              ]
            },
            "description": "Mengambil dan mendekripsi pesan dari database. Memverifikasi bahwa pesan yang terenkripsi di database dapat didekripsi dengan benar untuk ditampilkan.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Verify messages were decrypted correctly",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ Messages retrieved and decrypted successfully');",
                    "    console.log('Total messages:', response.data.totalMessages);",
                    "    ",
                    "    if (response.data.messages && response.data.messages.length > 0) {",
                    "        response.data.messages.forEach((msg, index) => {",
                    "            console.log(`Message ${index + 1}:`);",
                    "            console.log('  Decrypted:', msg.decryptedContent);",
                    "            console.log('  Raw DB:', msg.rawEncrypted.substring(0, 50) + '...');",
                    "        });",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Test Chat Database Encryption - View Raw Database Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"raw_database\",\n  \"conversationId\": {{test_conversation_id}}\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/database-encryption",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "database-encryption"
              ]
            },
            "description": "Melihat data mentah terenkripsi di database. Menunjukkan bagaimana data benar-benar disimpan dalam bentuk terenkripsi di database.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Show raw encrypted data in database",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ Raw database data retrieved');",
                    "    console.log('This is what attackers would see in database:');",
                    "    ",
                    "    if (response.data.rawDatabaseData && response.data.rawDatabaseData.length > 0) {",
                    "        response.data.rawDatabaseData.forEach((msg, index) => {",
                    "            console.log(`Raw Message ${index + 1}:`);",
                    "            console.log('  ID:', msg.id);",
                    "            console.log('  Encrypted Content:', msg.messageContent_RAW.substring(0, 60) + '...');",
                    "            console.log('  Is Encrypted:', msg.isEncrypted);",
                    "            console.log('  Content Length:', msg.contentLength);",
                    "        });",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Send Encrypted Chat Message - Production API",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"conversationId\": {{test_conversation_id}},\n  \"message\": \"{{production_test_message}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "messages"
              ]
            },
            "description": "Mengirim pesan melalui API production chat. Pesan akan otomatis dienkripsi sebelum disimpan ke database.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Extract message ID and verify encryption",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ Production chat message sent successfully');",
                    "    console.log('Message ID:', response.data.id);",
                    "    console.log('Message Content (displayed):', response.data.messageContent);",
                    "    ",
                    "    // Store for further testing",
                    "    if (response.data.id) {",
                    "        pm.environment.set('production_message_id', response.data.id);",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-8.2] Get Encrypted Chat Messages - Production API",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{customer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/chat/messages?conversationId={{test_conversation_id}}&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "chat",
                "messages"
              ],
              "query": [
                {
                  "key": "conversationId",
                  "value": "{{test_conversation_id}}"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Mengambil pesan chat melalui API production. Pesan akan otomatis didekripsi dari database untuk ditampilkan.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Verify messages are decrypted for display",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ Production chat messages retrieved successfully');",
                    "    console.log('Total messages:', response.data.pagination.total);",
                    "    ",
                    "    if (response.data.messages && response.data.messages.length > 0) {",
                    "        console.log('Recent messages (decrypted for display):');",
                    "        response.data.messages.slice(-3).forEach((msg, index) => {",
                    "            console.log(`  ${index + 1}. ${msg.sender.fullName}: ${msg.messageContent}`);",
                    "        });",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "[REQ-B-2.4] Get File Info - Test Encrypted Filename",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{provider_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/files/{{test_file_encryption_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "files",
                "{{test_file_encryption_id}}"
              ]
            },
            "description": "Mengambil informasi file dengan nama yang terenkripsi. API akan mengembalikan nama file asli untuk display frontend dari metadata enkripsi.",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "// Verify file info with decrypted filename",
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    console.log('✅ File info retrieved successfully');",
                    "    console.log('Encrypted filename:', response.data.encryptedFilename);",
                    "    console.log('Display name (original):', response.data.displayName);",
                    "    console.log('File type:', response.data.fileType);",
                    "    console.log('File URL:', response.data.fileUrl);",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ]
          },
          "response": []
        }
      ]
    },
    {
      "name": "[REQ-B-2.4 & REQ-B-8.2] Encryption Testing Suite",
      "item": [
        {
          "name": "[REQ-B-2.4] File Upload Encryption Tests",
          "item": [
            {
              "name": "[REQ-B-2.4.1] Upload File with Encryption",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{provider_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/test/sensitive-document.pdf"
                    },
                    {
                      "key": "uploadType",
                      "value": "document",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{base_url}}/api/upload",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "upload"
                  ]
                },
                "description": "REQ-B-2.4: Test file upload with automatic filename encryption. Original filename is encrypted using AES-256-CBC and stored in ProviderDocument.fileUrl"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.success && response.data.documentId) {",
                      "        pm.environment.set('encrypted_document_id', response.data.documentId);",
                      "        pm.environment.set('encrypted_filename', response.data.filename);",
                      "        pm.environment.set('original_filename', response.data.originalFilename);",
                      "        console.log('✅ [REQ-B-2.4] File encrypted and uploaded:');",
                      "        console.log('   Document ID:', response.data.documentId);",
                      "        console.log('   Original filename:', response.data.originalFilename);",
                      "        console.log('   Encrypted filename:', response.data.filename);",
                      "        ",
                      "        // Test encryption validation",
                      "        pm.test('[REQ-B-2.4] File upload encryption working', function() {",
                      "            pm.expect(response.success).to.be.true;",
                      "            pm.expect(response.data.filename).to.not.eql(response.data.originalFilename);",
                      "            pm.expect(response.data.filename).to.match(/^[a-f0-9]+_[a-f0-9]+\\.(jpg|jpeg|png|pdf)$/i);",
                      "            pm.expect(response.data.documentId).to.be.a('number');",
                      "        });",
                      "    }",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[REQ-B-2.4.2] Get File Info with Decryption",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{provider_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/files/{{encrypted_document_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "files",
                    "{{encrypted_document_id}}"
                  ]
                },
                "description": "REQ-B-2.4: Retrieve file information using document ID. API should return original filename for display while keeping encrypted filename for storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('✅ [REQ-B-2.4] File info retrieval:');",
                      "    console.log('   Display name:', response.data.displayName);",
                      "    console.log('   Encrypted filename:', response.data.encryptedFilename);",
                      "    ",
                      "    pm.test('[REQ-B-2.4] File info API working', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        pm.expect(response.data.displayName).to.eql(pm.environment.get('original_filename'));",
                      "        pm.expect(response.data.encryptedFilename).to.eql(pm.environment.get('encrypted_filename'));",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[REQ-B-2.4.3] Verify Database Encryption - Files",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{provider_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/verify-encryption?type=files",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "verify-encryption"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "files"
                    }
                  ]
                },
                "description": "REQ-B-2.4: Database verification endpoint to check file encryption status. Verify that sensitive filenames are not exposed in raw database storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    const fileAnalysis = response.data.verification.fileAnalysis;",
                      "    ",
                      "    console.log('✅ [REQ-B-2.4] Database encryption verification:');",
                      "    console.log('   Total documents:', fileAnalysis.totalDocuments);",
                      "    console.log('   Encrypted documents:', fileAnalysis.encryptedDocuments);",
                      "    console.log('   Encryption rate:', fileAnalysis.encryptionRate + '%');",
                      "    ",
                      "    // Check latest document encryption",
                      "    if (fileAnalysis.documents.length > 0) {",
                      "        const latestDoc = fileAnalysis.documents[0];",
                      "        console.log('   Latest document encryption status:', latestDoc.encryptionStatus);",
                      "        console.log('   Encrypted fileUrl in DB:', latestDoc.fileUrl_RAW_DATABASE);",
                      "    }",
                      "    ",
                      "    pm.test('[REQ-B-2.4] Database file encryption verification', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        pm.expect(fileAnalysis.encryptionRate).to.be.above(0);",
                      "        if (fileAnalysis.documents.length > 0) {",
                      "            const latestDoc = fileAnalysis.documents[0];",
                      "            pm.expect(latestDoc.encryptionStatus).to.eql('ENCRYPTED');",
                      "            pm.expect(latestDoc.hasEncryption.iv).to.be.true;",
                      "            pm.expect(latestDoc.hasEncryption.authTag).to.be.true;",
                      "        }",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "[REQ-B-8.2] Chat Message Encryption Tests",
          "item": [
            {
              "name": "[REQ-B-8.2.1] Create Test Message for Encryption",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{provider_token}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"create_test_message\",\n  \"testData\": {\n    \"message\": \"CONFIDENTIAL: Customer credit card 4532-1234-5678-9012 expires 12/25 CVV 123. Bank account: BCA 1234567890. Phone: 081234567890\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/verify-encryption",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "verify-encryption"
                  ]
                },
                "description": "REQ-B-8.2: Create a test message with sensitive data to verify chat encryption. Message should be encrypted before database storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data.messageId) {",
                      "        pm.environment.set('encrypted_message_id', response.data.messageId);",
                      "        pm.environment.set('test_conversation_id', response.data.conversationId);",
                      "        console.log('✅ [REQ-B-8.2] Test message created:');",
                      "        console.log('   Message ID:', response.data.messageId);",
                      "        console.log('   Conversation ID:', response.data.conversationId);",
                      "        console.log('   Original message:', response.data.originalMessage);",
                      "        console.log('   Encrypted in DB:', response.data.encryptedInDatabase);",
                      "        ",
                      "        pm.test('[REQ-B-8.2] Test message encryption', function() {",
                      "            pm.expect(response.success).to.be.true;",
                      "            pm.expect(response.data.encryptedInDatabase).to.not.eql(response.data.originalMessage);",
                      "            pm.expect(response.data.encryptedInDatabase).to.include(':'); // Our encryption format",
                      "        });",
                      "    }",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[REQ-B-8.2.2] Send Encrypted Chat Message",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{customer_token}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"conversationId\": \"{{test_conversation_id}}\",\n  \"message\": \"SENSITIVE INFO: My social security number is 123-45-6789 and my bank PIN is 1234. Please keep this confidential.\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/chat/messages",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "chat",
                    "messages"
                  ]
                },
                "description": "REQ-B-8.2: Send message with sensitive content through chat API. Message should be automatically encrypted before database storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data.id) {",
                      "        pm.environment.set('live_encrypted_message_id', response.data.id);",
                      "        console.log('✅ [REQ-B-8.2] Live message sent and encrypted:');",
                      "        console.log('   Message ID:', response.data.id);",
                      "        console.log('   Sent content:', response.data.messageContent); // Should be original for sender",
                      "        ",
                      "        pm.test('[REQ-B-8.2] Chat message sent successfully', function() {",
                      "            pm.expect(response.success).to.be.true;",
                      "            pm.expect(response.data.id).to.be.a('number');",
                      "            pm.expect(response.data.messageContent).to.include('SENSITIVE INFO');",
                      "        });",
                      "    }",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[REQ-B-8.2.3] Get Encrypted Messages (Auto-Decrypt)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{customer_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/chat/messages?conversationId={{test_conversation_id}}&page=1&limit=10",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "chat",
                    "messages"
                  ],
                  "query": [
                    {
                      "key": "conversationId",
                      "value": "{{test_conversation_id}}"
                    },
                    {
                      "key": "page",
                      "value": "1"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                },
                "description": "REQ-B-8.2: Retrieve chat messages. API should automatically decrypt messages for display while keeping them encrypted in database"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    const messages = response.data.messages;",
                      "    ",
                      "    console.log('✅ [REQ-B-8.2] Messages retrieved and decrypted:');",
                      "    console.log('   Total messages:', messages.length);",
                      "    ",
                      "    // Find our test message",
                      "    const testMessage = messages.find(m => m.messageContent.includes('SENSITIVE INFO'));",
                      "    if (testMessage) {",
                      "        console.log('   Test message decrypted:', testMessage.messageContent.substring(0, 50) + '...');",
                      "    }",
                      "    ",
                      "    pm.test('[REQ-B-8.2] Messages retrieved and decrypted', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        pm.expect(messages).to.be.an('array');",
                      "        if (testMessage) {",
                      "            pm.expect(testMessage.messageContent).to.include('SENSITIVE INFO');",
                      "            pm.expect(testMessage.messageContent).to.include('123-45-6789');",
                      "        }",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[REQ-B-8.2.4] Verify Database Encryption - Messages",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{customer_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/verify-encryption?type=messages",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "verify-encryption"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "messages"
                    }
                  ]
                },
                "description": "REQ-B-8.2: Database verification endpoint to check message encryption status. Verify that sensitive message content is not exposed in raw database storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    const messageAnalysis = response.data.verification.messageAnalysis;",
                      "    ",
                      "    console.log('✅ [REQ-B-8.2] Database message encryption verification:');",
                      "    console.log('   Total messages:', messageAnalysis.totalMessages);",
                      "    console.log('   Conversations:', messageAnalysis.conversations);",
                      "    ",
                      "    // Check for encrypted messages",
                      "    const encryptedMessages = messageAnalysis.messages.filter(m => m.encryptionStatus === 'ENCRYPTED');",
                      "    console.log('   Encrypted messages:', encryptedMessages.length);",
                      "    ",
                      "    // Show sample encrypted content from database",
                      "    if (encryptedMessages.length > 0) {",
                      "        const sampleEncrypted = encryptedMessages[0];",
                      "        console.log('   Sample encrypted in DB:', sampleEncrypted.messageContent_RAW_DATABASE.substring(0, 50) + '...');",
                      "        console.log('   Sample decrypted:', sampleEncrypted.decryptedContent.substring(0, 50) + '...');",
                      "    }",
                      "    ",
                      "    pm.test('[REQ-B-8.2] Database message encryption verification', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        pm.expect(messageAnalysis.totalMessages).to.be.above(0);",
                      "        pm.expect(encryptedMessages.length).to.be.above(0);",
                      "        ",
                      "        // Verify sensitive data not in raw database",
                      "        const rawMessages = messageAnalysis.messages.map(m => m.messageContent_RAW_DATABASE).join(' ');",
                      "        pm.expect(rawMessages).to.not.include('123-45-6789'); // SSN should not appear in raw DB",
                      "        pm.expect(rawMessages).to.not.include('4532-1234-5678-9012'); // CC should not appear in raw DB",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "[COMPREHENSIVE] Full Encryption Verification",
          "item": [
            {
              "name": "[COMPREHENSIVE.1] Overall Security Assessment",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{provider_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/verify-encryption?type=all",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "verify-encryption"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "all"
                    }
                  ]
                },
                "description": "C-7 Comprehensive security assessment for REQ-B-2.4 (file encryption) and REQ-B-8.2 (end-to-end chat encryption). Verify C-7 constraint: Chat harus dienkripsi end-to-end"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    const verification = response.data.verification;",
                      "    const assessment = verification.overallAssessment;",
                      "    ",
                      "    console.log('🔒 COMPREHENSIVE ENCRYPTION SECURITY REPORT - C-7 CONSTRAINT');",
                      "    console.log('================================================================');",
                      "    console.log('🎯 C-7 Constraint: Chat harus dienkripsi end-to-end');",
                      "    console.log('REQ-B-2.4 File Encryption:', assessment.req_b_2_4_file_encryption);",
                      "    console.log('REQ-B-8.2 End-to-End Chat Encryption:', assessment.req_b_8_2_message_encryption);",
                      "    console.log('Overall Security Level:', assessment.securityLevel);",
                      "    ",
                      "    if (verification.fileAnalysis) {",
                      "        console.log('');",
                      "        console.log('📁 FILE ENCRYPTION ANALYSIS:');",
                      "        console.log('   Files encrypted:', verification.fileAnalysis.encryptedDocuments + '/' + verification.fileAnalysis.totalDocuments);",
                      "        console.log('   Encryption rate:', verification.fileAnalysis.encryptionRate + '%');",
                      "    }",
                      "    ",
                      "    if (verification.messageAnalysis) {",
                      "        console.log('');",
                      "        console.log('💬 END-TO-END CHAT ENCRYPTION ANALYSIS (C-7):');",
                      "        console.log('   Total messages:', verification.messageAnalysis.totalMessages);",
                      "        console.log('   Conversations:', verification.messageAnalysis.conversations);",
                      "        const encryptedCount = verification.messageAnalysis.messages.filter(m => m.encryptionStatus === 'ENCRYPTED').length;",
                      "        console.log('   End-to-end encrypted messages:', encryptedCount + '/' + verification.messageAnalysis.totalMessages);",
                      "    }",
                      "    ",
                      "    if (assessment.recommendations && assessment.recommendations.length > 0) {",
                      "        console.log('');",
                      "        console.log('💡 RECOMMENDATIONS:');",
                      "        assessment.recommendations.forEach((rec, index) => {",
                      "            console.log('   ' + (index + 1) + '. ' + rec);",
                      "        });",
                      "    }",
                      "    ",
                      "    pm.test('[COMPREHENSIVE] Full encryption verification', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        pm.expect(assessment.securityLevel).to.be.oneOf(['HIGH', 'MEDIUM']);",
                      "        pm.expect(assessment.req_b_2_4_file_encryption).to.be.oneOf(['WORKING', 'NOT_DETECTED']);",
                      "        pm.expect(assessment.req_b_8_2_message_encryption).to.be.oneOf(['WORKING', 'NOT_DETECTED']);",
                      "        ",
                      "        // At least one encryption feature should be working",
                      "        const hasWorkingEncryption = assessment.req_b_2_4_file_encryption === 'WORKING' || assessment.req_b_8_2_message_encryption === 'WORKING';",
                      "        pm.expect(hasWorkingEncryption).to.be.true;",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "[SECURITY.1] Penetration Test - Search for Sensitive Data",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/verify-encryption?type=all",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "verify-encryption"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "all"
                    }
                  ]
                },
                "description": "Security penetration test using admin access to verify that sensitive data is not exposed in database raw storage"
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    const verification = response.data.verification;",
                      "    ",
                      "    // Security test patterns - these should NOT appear in raw database",
                      "    const sensitivePatterns = [",
                      "        '123-45-6789',      // SSN",
                      "        '4532-1234-5678',   // Credit card",
                      "        'CONFIDENTIAL',     // Document markers",
                      "        'SENSITIVE INFO',   // Message markers",
                      "        'PIN is 1234'       // PIN information",
                      "    ];",
                      "    ",
                      "    let securityViolations = [];",
                      "    ",
                      "    console.log('🔍 SECURITY PENETRATION TEST');",
                      "    console.log('============================');",
                      "    ",
                      "    // Check file raw data",
                      "    if (verification.fileAnalysis && verification.fileAnalysis.documents) {",
                      "        verification.fileAnalysis.documents.forEach(doc => {",
                      "            const rawFileUrl = doc.fileUrl_RAW_DATABASE.toLowerCase();",
                      "            sensitivePatterns.forEach(pattern => {",
                      "                if (rawFileUrl.includes(pattern.toLowerCase())) {",
                      "                    securityViolations.push(`File ${doc.documentId}: '${pattern}' found in raw fileUrl`);",
                      "                }",
                      "            });",
                      "        });",
                      "    }",
                      "    ",
                      "    // Check message raw data",
                      "    if (verification.messageAnalysis && verification.messageAnalysis.messages) {",
                      "        verification.messageAnalysis.messages.forEach(msg => {",
                      "            const rawContent = msg.messageContent_RAW_DATABASE.toLowerCase();",
                      "            sensitivePatterns.forEach(pattern => {",
                      "                if (rawContent.includes(pattern.toLowerCase())) {",
                      "                    securityViolations.push(`Message ${msg.messageId}: '${pattern}' found in raw database content`);",
                      "                }",
                      "            });",
                      "        });",
                      "    }",
                      "    ",
                      "    if (securityViolations.length === 0) {",
                      "        console.log('✅ SECURITY TEST PASSED: No sensitive data found in raw database storage');",
                      "    } else {",
                      "        console.log('❌ SECURITY VIOLATIONS FOUND:');",
                      "        securityViolations.forEach((violation, index) => {",
                      "            console.log('   ' + (index + 1) + '. ' + violation);",
                      "        });",
                      "    }",
                      "    ",
                      "    pm.test('[SECURITY] No sensitive data in raw database', function() {",
                      "        pm.expect(securityViolations).to.have.lengthOf(0);",
                      "    });",
                      "    ",
                      "    pm.test('[SECURITY] Encryption protecting sensitive data', function() {",
                      "        pm.expect(response.success).to.be.true;",
                      "        // At least some data should be encrypted",
                      "        const hasEncryption = (verification.fileAnalysis && verification.fileAnalysis.encryptionRate > 0) || ",
                      "                              (verification.messageAnalysis && verification.messageAnalysis.messages.some(m => m.encryptionStatus === 'ENCRYPTED'));",
                      "        pm.expect(hasEncryption).to.be.true;",
                      "    });",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script untuk Bearer Token debugging dan Email Verification setup",
          "console.log('=== REQUEST INFO ===');",
          "console.log('Method:', pm.request.method);",
          "console.log('URL:', pm.request.url.toString());",
          "",
          "// Log Bearer token jika ada",
          "const authHeader = pm.request.headers.get('Authorization');",
          "if (authHeader && authHeader.startsWith('Bearer ')) {",
          "    const token = authHeader.substring(7);",
          "    console.log('Using Bearer token (first 30 chars):', token.substring(0, 30) + '...');",
          "    ",
          "    // Decode JWT payload untuk debugging (tanpa verifikasi)",
          "    try {",
          "        const base64Payload = token.split('.')[1];",
          "        const payload = JSON.parse(atob(base64Payload));",
          "        console.log('Token payload:', {",
          "            userId: payload.userId,",
          "            roleName: payload.roleName,",
          "            exp: new Date(payload.exp * 1000).toISOString()",
          "        });",
          "    } catch (e) {",
          "        console.log('Could not decode token payload');",
          "    }",
          "} else if (authHeader) {",
          "    console.log('Using auth header (non-Bearer):', authHeader);",
          "} else {",
          "    console.log('No authentication header - public endpoint');",
          "}",
          "",
          "// Log email verification testing context",
          "const url = pm.request.url.toString();",
          "if (url.includes('/email/')) {",
          "    console.log('=== EMAIL VERIFICATION TEST ===');",
          "    console.log('Testing email endpoint:', url);",
          "    const verificationEmail = pm.environment.get('verification_email');",
          "    if (verificationEmail) {",
          "        console.log('Using verification email:', verificationEmail);",
          "    }",
          "}",
          "console.log('==================');",
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script untuk Bearer Token validation dan Email Verification testing",
          "console.log('=== RESPONSE INFO ===');",
          "console.log('Status:', pm.response.code, pm.response.status);",
          "console.log('Response time:', pm.response.responseTime + 'ms');",
          "",
          "// Test umum untuk semua responses",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Test struktur response",
          "if (pm.response.code >= 200 && pm.response.code < 300) {",
          "    pm.test('Success response has correct structure', function () {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('success', true);",
          "        pm.expect(jsonData).to.have.property('data');",
          "        pm.expect(jsonData).to.have.property('message');",
          "    });",
          "    ",
          "    // Log response data",
          "    try {",
          "        const responseData = pm.response.json();",
          "        console.log('Response success:', responseData.success);",
          "        console.log('Response message:', responseData.message);",
          "        ",
          "        // Special handling for email verification responses",
          "        const url = pm.request.url.toString();",
          "        if (url.includes('/email/') && responseData.data && responseData.data.verificationCode) {",
          "            console.log('=== EMAIL VERIFICATION CODE ===');",
          "            console.log('Verification code generated:', responseData.data.verificationCode);",
          "            console.log('Email sent to:', responseData.data.email || 'N/A');",
          "            console.log('Expires at:', responseData.data.expiresAt || 'N/A');",
          "            console.log('=============================');",
          "        }",
          "        ",
          "        if (responseData.data && responseData.data.token) {",
          "            console.log('Bearer token received in response');",
          "        }",
          "    } catch (e) {",
          "        console.log('Non-JSON response');",
          "    }",
          "} else {",
          "    pm.test('Error response has correct structure', function () {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('success', false);",
          "        pm.expect(jsonData).to.have.property('error');",
          "    });",
          "    ",
          "    // Log error details",
          "    try {",
          "        const errorData = pm.response.json();",
          "        console.log('Error:', errorData.error);",
          "    } catch (e) {",
          "        console.log('Could not parse error response');",
          "    }",
          "}",
          "",
          "// Global tests for email verification endpoints",
          "const url = pm.request.url.toString();",
          "if (url.includes('/email/') && pm.response.code === 200) {",
          "    pm.test('Email verification response includes required fields', function () {",
          "        const jsonData = pm.response.json();",
          "        if (pm.request.method === 'POST') {",
          "            // For POST requests, expect verification code",
          "            pm.expect(jsonData.data).to.have.property('verificationCode');",
          "            pm.expect(jsonData.data).to.have.property('expiresAt');",
          "        } else if (pm.request.method === 'PUT') {",
          "            // For PUT requests, expect verification success",
          "            pm.expect(jsonData.data).to.have.property('verified');",
          "        }",
          "    });",
          "}",
          "console.log('==================');",
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string",
      "description": "Base URL for E-Kerja API"
    },
    {
      "key": "customer_token",
      "value": "",
      "type": "string",
      "description": "Bearer token untuk customer - auto-extracted"
    },
    {
      "key": "provider_token",
      "value": "",
      "type": "string",
      "description": "Bearer token untuk provider (Fanza) - auto-extracted"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string",
      "description": "Bearer token untuk admin - auto-extracted"
    },
    {
      "key": "other_provider_token",
      "value": "",
      "type": "string",
      "description": "Bearer token untuk provider lain (untuk testing review reports)"
    },
    {
      "key": "customer_id",
      "value": "",
      "type": "string",
      "description": "Customer ID - auto-extracted"
    },
    {
      "key": "provider_id",
      "value": "",
      "type": "string",
      "description": "Provider ID (Fanza) - auto-extracted"
    },
    {
      "key": "service_id",
      "value": "",
      "type": "string",
      "description": "Service ID - auto-extracted"
    },
    {
      "key": "order_id",
      "value": "",
      "type": "string",
      "description": "Order ID - auto-extracted from order creation"
    },
    {
      "key": "order_detail_id",
      "value": "",
      "type": "string",
      "description": "Order Detail ID - auto-extracted"
    },
    {
      "key": "review_id",
      "value": "",
      "type": "string",
      "description": "Review ID - auto-extracted from review creation"
    },
    {
      "key": "review_report_id",
      "value": "",
      "type": "string",
      "description": "Review Report ID - auto-extracted"
    },
    {
      "key": "chat_conversation_id",
      "value": "",
      "type": "string",
      "description": "Chat conversation ID - auto-extracted"
    },
    {
      "key": "chat_message_id",
      "value": "",
      "type": "string",
      "description": "Chat message ID - auto-extracted"
    },
    {
      "key": "admin_category_id",
      "value": "",
      "type": "string",
      "description": "Admin created category ID - auto-extracted"
    },
    {
      "key": "setting_key",
      "value": "test_setting",
      "type": "string",
      "description": "Setting key for testing"
    },
    {
      "key": "setting_value",
      "value": "test_value",
      "type": "string",
      "description": "Setting value for testing"
    },
    {
      "key": "faq_id",
      "value": "",
      "type": "string",
      "description": "FAQ ID - auto-extracted"
    },
    {
      "key": "page",
      "value": "1",
      "type": "string",
      "description": "Universal page number for data table pagination"
    },
    {
      "key": "limit",
      "value": "10",
      "type": "string",
      "description": "Universal items per page for data table pagination"
    },
    {
      "key": "verification_email",
      "value": "test.verification@example.com",
      "type": "string",
      "description": "Email for verification testing (REQ-B-15)"
    },
    {
      "key": "verification_full_name",
      "value": "Test Verification User",
      "type": "string",
      "description": "Full name for registration verification testing"
    },
    {
      "key": "registration_verification_code",
      "value": "",
      "type": "string",
      "description": "6-digit code for registration verification - auto-extracted"
    },
    {
      "key": "password_reset_verification_code",
      "value": "",
      "type": "string",
      "description": "6-digit code for password reset verification - auto-extracted"
    },
    {
      "key": "order_status_verification_code",
      "value": "",
      "type": "string",
      "description": "6-digit code for order status verification - auto-extracted"
    },
    {
      "key": "new_password",
      "value": "NewPassword123!",
      "type": "string",
      "description": "New password for password reset verification"
    },
    {
      "key": "order_new_status",
      "value": "COMPLETED",
      "type": "string",
      "description": "New order status for verification testing"
    },
    {
      "key": "chat_access_token",
      "value": "",
      "type": "string",
      "description": "Access token for admin chat viewing - auto-extracted"
    },
    {
      "key": "chat_access_reason",
      "value": "Customer support investigation",
      "type": "string",
      "description": "Reason for admin chat access request"
    },
    {
      "key": "chat_access_context",
      "value": "Need to review chat history for dispute resolution",
      "type": "string",
      "description": "Context for admin chat access request"
    },
    {
      "key": "chat_access_approved",
      "value": "true",
      "type": "string",
      "description": "Customer response to chat access request: true/false"
    }
  ]
}